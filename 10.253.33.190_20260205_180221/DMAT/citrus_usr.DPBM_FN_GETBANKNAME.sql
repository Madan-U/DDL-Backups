-- Object: FUNCTION citrus_usr.DPBM_FN_GETBANKNAME
-- Server: 10.253.33.190 | DB: DMAT
--------------------------------------------------

CREATE FUNCTION [citrus_usr].[DPBM_FN_GETBANKNAME]
(
@BANKNAME VARCHAR(500)
)RETURNS VARCHAR(500)
BEGIN

DECLARE @VARIABLE VARCHAR(8000)

IF CHARINDEX(' - ',@BANKNAME) <> 0 
	BEGIN
		SELECT @VARIABLE=LEFT(@BANKNAME,CHARINDEX(' - ',@BANKNAME) -1) 
	END
ELSE IF CHARINDEX(' -',@BANKNAME) <> 0 
	BEGIN
		SELECT @VARIABLE=LEFT(@BANKNAME,CHARINDEX(' -',@BANKNAME) -1) 
	END

ELSE IF CHARINDEX('- ',@BANKNAME) <> 0
	BEGIN
		SELECT @VARIABLE=LEFT(@BANKNAME,CHARINDEX('- ',@BANKNAME) -1) 
	END

ELSE IF CHARINDEX('-',@BANKNAME) <> 0
	BEGIN
		SELECT @VARIABLE=LEFT(@BANKNAME,CHARINDEX('-',@BANKNAME) -1) 
	END

ELSE
	BEGIN
		SELECT @VARIABLE=@BANKNAME
	END

RETURN @VARIABLE
END

GO
